"use strict";(self.webpackChunkcocoandeve_react=self.webpackChunkcocoandeve_react||[]).push([[172],{1172:function(e,s,t){t.r(s),t.d(s,{default:function(){return g}});var a=t(4942),n=t(885),o=t(2791),i=(t(1462),[{question:"How does your skin feel most days?",questionNote:"Choose 1",answers:["Dry and flaky","Tends to get oily throughout the day","A combination of oily and dry on different areas","Red and sensitive with uneven texture","Normal and flawless"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger"},{question:"About how many glasses of water do you drink per day?",questionNote:"Choose 1",answers:["3 or less","4 to 6","7 to 9","More than 10"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger",buttonType:"full"},{question:"What is your local climate like?",questionNote:"Choose 1",answers:["Dry","Neutral","Humid & Hot","Seasonal"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger",buttonType:"full"},{question:"What is your main concern?",questionNote:"Choose 1",answers:["Clogged and enlarged pores","Dull skin with fine lines and wrinkles","Dark spots or hyperpigmentation","Dehydrated and flaky skin","Acne and/or skin inflammation","Excess oil"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger"}]),c=t(4392),r=t(3564),l=t(9708),u=t(3604),d=t(3033),h=t(184),k=function(e){var s=e.onSubmit,t=e.skipEmail,a=(0,o.useState)(""),i=(0,n.Z)(a,2),c=i[0],r=i[1],l=(0,o.useState)(!1),k=(0,n.Z)(l,2),m=k[0],p=k[1],f=(0,o.useState)(!1),b=(0,n.Z)(f,2),y=b[0],g=b[1];return(0,h.jsxs)("div",{className:"col-12 col-lg-6 mt-4 pt-0 pt-lg-4 text-center",children:[(0,h.jsx)("p",{className:"h1 mb-0",children:"We found your perfect mask"}),(0,h.jsx)("p",{className:"mt-2 h4 fw-normal mx-3",dangerouslySetInnerHTML:{__html:"Enter your email to view your results! Plus, get a promocode for 10% OFF for your first purchase."}}),(0,h.jsx)("div",{className:"col-12 col-lg-8 ms-auto me-auto mt-4",children:(0,h.jsx)("div",{className:"form-group",children:(0,h.jsxs)("form",{onSubmit:function(e){s(c),e.preventDefault()},children:[(0,h.jsx)("input",{type:"email",className:"form-control bg-light-gray",placeholder:"E-mail address",onChange:function(e){p((0,d.oH)(e.target.value)),r(e.target.value)}}),(0,h.jsxs)("div",{className:"d-flex pb-2 justify-content-center align-items-center mt-3",children:[(0,h.jsxs)("label",{className:"checkbox-number align-items-center pt-0 font-size-sm justify-content-center",htmlFor:"agree",children:[(0,h.jsx)("input",{className:"d-none",type:"checkbox",value:"true",id:"agree",onChange:function(e){g(e.target.checked)}}),(0,h.jsx)("div",{className:"".concat(y?"bg-primary border-0":""," custom-check me-1 mt-0 form-check-input text-center d-flex align-items-center justify-content-center"),children:(0,h.jsx)(u.r,{className:"".concat(y?"":"d-none"," svg text-white")})})]}),(0,h.jsx)("label",{className:"font-size-sm mx-1",dangerouslySetInnerHTML:{__html:"I agree to Privacy Policy & ToS"},htmlFor:"agree"})]}),(0,h.jsx)("p",{className:"font-size-sm",children:"By signing up, you agree to receive exclusive offers via email. Sign up not required for purchase. Opt out any time."}),(0,h.jsx)("button",{type:"submit",className:"btn btn-lg d-block btn-primary mb-3 w-100 mt-2",disabled:!m||!y,children:"Submit"})]})})}),(0,h.jsx)("div",{className:"footer-action w-100 pb-2 bg-white mt-4",children:(0,h.jsx)("a",{href:"#",className:"d-block text-underline text-black w-100 mt-5 mb-lg-4",onClick:t,children:"Skip this step"})})]})},m=function(e){var s=e.viewMyResult;return(0,h.jsxs)("div",{className:"col-12 col-lg-6 mt-4 pt-0 pt-lg-4 text-center",children:[(0,h.jsxs)("p",{className:"h1",children:["Thanks!",(0,h.jsx)("br",{}),"Here is your promocode:"]}),(0,h.jsxs)("div",{className:"col-12 col-lg-8 ms-auto me-auto mt-2",children:[(0,h.jsx)("span",{className:"h1 px-4 py-1 text-primary rounded p-2 bg-light-gray d-inline-block",children:"SKIN15"}),(0,h.jsx)("p",{className:"mt-2",children:"No min spend, 10% off on SINGLE masks only!"}),(0,h.jsx)("button",{className:"mt-2 btn btn-lg btn-primary w-100",onClick:s,children:"View my results"})]})]})},p=t(501),f=t(9804),b=function(e,s){var t=[],a=e[0].answers,n=s[1],o=e[1].answers,i=s[2],c=e[2].answers,r=s[3],l=e[3].answers,u=s[4];switch(n){case a[0]:switch(u){case l[0]:switch(r){case c[0]:case c[1]:switch(i){case o[0]:case o[1]:t=["TSW Mask"];break;case o[2]:case o[3]:t=["APC Mask"]}break;case c[2]:t=["TSW Mask"];break;case c[3]:t=["APC Mask"]}break;case l[1]:t=["AEA Mask"];break;case l[2]:switch(i){case o[0]:case o[1]:t=["TSW Mask"];break;default:t=["AEA Mask"]}break;case l[3]:t=["TSW Mask"];break;case l[4]:t=["OC Mask"];break;case l[5]:switch(r){case c[0]:case c[1]:}switch(i){case o[0]:case o[1]:t=["OC Mask"];break;default:t=["APC Mask"]}}break;case a[1]:switch(u){case l[0]:switch(r){case c[0]:case c[1]:switch(i){case o[0]:case o[1]:t=["APC Mask"];break;default:t=["OC Mask"]}break;default:t=["OC Mask"]}break;case l[1]:switch(i){case o[0]:case o[1]:t=["TSW Mask"];break;default:t=["AEA Mask"]}break;case l[2]:t=["AEA Mask"];break;case l[3]:switch(r){case c[0]:case c[1]:switch(i){case o[0]:case o[1]:t=["TSW Mask"];break;default:t=["APC Mask"]}break;default:t=["TSW Mask"]}break;case l[4]:t=["OC Mask"];break;case l[5]:switch(r){case c[0]:case c[1]:}switch(i){case o[0]:case o[1]:t=["APC Mask"];break;default:t=["OC Mask"]}}break;case a[2]:switch(u){case l[0]:switch(r){case c[0]:case c[1]:switch(i){case o[0]:case o[1]:t=["APC Mask"];break;default:t=["OC Mask"]}break;default:t=["OC Mask"]}break;case l[1]:if(r===c[2])t=["OC Mask"];else t=["AEA Mask"];break;case l[2]:switch(i){case o[0]:case o[1]:t=["AEA Mask"];break;default:t=["OC Mask"]}break;case l[3]:switch(r){case c[2]:case c[3]:t=["TSW Mask"];break;default:switch(i){case o[0]:case o[1]:t=["TSW Mask"];break;default:t=["OC Mask"]}}break;case l[4]:case l[5]:t=["OC Mask"]}break;case a[3]:switch(u){case l[0]:switch(r){case c[2]:t=["OC Mask"];break;case c[3]:t=["APC Mask"];break;default:switch(i){case o[0]:case o[1]:t=["APC Mask"];break;default:t=["OC Mask"]}}break;case l[1]:if(r===c[3])t=["OC Mask"];else t=["AEA Mask"];break;case l[2]:t=["AEA Mask"];break;case l[3]:t=["TSW Mask"];break;case l[4]:case l[5]:t=["OC Mask"]}break;case a[4]:switch(u){case l[0]:t=["APC Mask"];break;case l[1]:t=["TSW Mask"];break;case l[2]:t=["AEA Mask"];break;case l[3]:t=["TSW Mask"];break;case l[4]:case l[5]:t=["OC Mask"]}}return{productsRecommend:t}},y=t(3661);window.getCookie=d.ej;var g=function(){var e=(0,p.lr)(),s=(0,n.Z)(e,1)[0],t=s.get("site"),u=s.get("gaid"),g=s.get("state"),w=(0,o.useRef)(),v=(0,d.ej)("surveyPosition")||"start";"started"!==g||"start"!==(0,d.ej)("surveyPosition")&&null!==(0,d.ej)("surveyPosition")&&""!==(0,d.ej)("surveyPosition")||((0,d.EA)("Survey","started"),v="question-1",(0,d.d8)("answeredQuestion",""));var x=(0,d.ej)("currentQuestion")?parseInt((0,d.ej)("currentQuestion"),10):1,C=!!(0,d.ej)("quizEmail"),j=(0,d.PL)("getCookieAnsweredQuestionMask")?(0,d.PL)("getCookieAnsweredQuestionMask"):{},M=(0,o.useState)(v),A=(0,n.Z)(M,2),S=A[0],N=A[1],T=(0,o.useState)(x),q=(0,n.Z)(T,2),E=q[0],_=q[1],P=(0,o.useState)(j),O=(0,n.Z)(P,2),Z=O[0],W=O[1],z=(0,o.useState)(C),R=(0,n.Z)(z,2),Q=R[0],L=R[1],F=(0,o.useState)(!1),H=(0,n.Z)(F,2),D=H[0],B=H[1],I=(0,o.useState)(""),G=(0,n.Z)(I,2),J=G[0],K=G[1],V="result"!==S?"px-g":"overflow-hidden",X=function(e,s){console.log("answerAction",e,s),Z[e]=s,W((0,d.v_)(Z)),(0,d.cD)((0,d.v_)(Z)),console.log("currentAnswer2",Z)},U=function(e){if(e<=i.length){var s=i[e];if(s&&s.rule&&s.rule.skipped)if((0,d.v_)(Z)[s.rule.question]===s.rule.answer)X(e,""),_(E<e?e+1:e-1);else _(e);else _(e)}else e>=i.length&&(console.log("finish",S),$(),(0,d.d8)("surveyPosition","finished"),N("finished"),Q&&ee(!0))},Y=function(){console.log("email to save",(0,d.ej)("quizEmail"));for(var e={},s=0,t=Object.entries(Z);s<t.length;s++){var a=(0,n.Z)(t[s],2),o=a[0],c=a[1],r=o-1;if(i[r])e["".concat(o,": ").concat(i[r].question)]=c}var l=b(i,Z).productsRecommend,h=[],k=[],m="";l.forEach((function(e,s){h.push(y.Z[e].handle),k.push(y.Z[e].sku),m="".concat(m).concat(0===s?"":",").concat(y.Z[e].sku)}));var p={_ga:u,questions_answers:e,email:(0,d.ej)("quizEmail"),sku:m,quiz_type:"mask"};fetch("https://api.sandandsky.com/surveys",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(p)})},$=function(){if(window.top!==window.self){var e=(0,d.v_)(Z),s=Object.keys(e);(0,d.EA)("Survey","completed"),(0,d.ne)(t,"surveySubmitNew","true"),s.forEach((function(s,t){var a=i[t],n=e[s],o=a.question,c="object"===typeof n?n.join(","):n;(0,d.EA)("Survey",c,o)}))}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t||"dev.sandandsky.com",o=b(i,Z),c=o.productsRecommend;if(console.log("currentAnswer",Z,c),s&&Y(),e){var r;(0,d.d8)("surveyPosition","finished"),N("finished"),(0,d.ne)(t,"surveyPosition","finished");var l=[],u=[];c.forEach((function(e,s){l.push(y.Z[e].handle),u.push(y.Z[e].sku)}));var h=(r={productsRecommend:c,productHandle:l,productSkus:u},(0,a.Z)(r,"productHandle",l),(0,a.Z)(r,"productSkus",u),r),k=JSON.stringify(h);(0,d.d8)("surveyResult",k),(0,d.ne)(t,"surveyResult",k),setTimeout((function(){(0,d.d8)("surveyPosition","result"),N("result"),(0,d.ne)(t,"surveyPosition","result"),(0,d.d8)("surveyResult",k),(0,d.ne)(t,"surveyResult",k),(0,d._5)(),window.top!==window.self?setTimeout((function(){window.top.location.href="https://".concat(n,"/pages/survey-result-mask/")}),500):window.location.href="/survey-result-mask"}),1500)}};return(0,h.jsx)("div",{ref:w,className:"survey-mask ".concat("start"===S?"cover":V," ").concat("result"!==S&&"start"!==S?"container":""),children:(0,h.jsxs)("div",{className:"row justify-content-center survey-content ".concat("start"===S?"survey-content__start pt-4":"align-content-start"," "),children:["start"===S&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"survey-mask__start-screen text-center mt-7",children:[(0,h.jsx)("img",{className:"tooltip",src:"https://imagedelivery.net/ghVX8djKS3R8-n0oGeWHEA/5d327fa8-3567-48a0-177f-0f28bcaa3300/828x"}),(0,h.jsx)("h1",{children:"Mask Quiz"}),(0,h.jsx)("button",{className:"btn btn-primary text-white",onClick:function(){return(0,d.EA)("Survey","started"),void N("question-1")},children:"Take the quiz"})]})}),"start"!==S&&"finished"!==S&&"result"!==S&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"text-center position-relative",children:i.map((function(e,s){var t="question-".concat(s);if(E===s+1)return"MultipleChoice"===e.type?(0,h.jsx)(c.C,{currentAnswer:(0,d.v_)(Z),totalQuestions:e.answers.length,totalSteps:i.length,answerAction:X,setCurrentQuestion:U,currentQuestion:E,colSize:"col-lg-8 offset-lg-2 col-xl-6 offset-xl-3",question:e.question,questionNote:e.questionNote,caption:e.caption?e.caption:"",captionClass:e.captionClass?e.captionClass:"",category:e.category,progressBarType:"2",children:(0,h.jsx)(l.Z,{answers:e.answers,lastFull:e.lastFull,maxChoose:e.maxChoose,lastDisableForAll:e.lastDisableForAll,btnClass:e.btnClass})},t):(0,h.jsx)(c.C,{currentAnswer:(0,d.v_)(Z),totalQuestions:e.answers.length,answerAction:X,setCurrentQuestion:U,currentQuestion:E,totalSteps:i.length,colSize:"col-lg-8 offset-lg-2 col-xl-6 offset-xl-3",question:e.question,questionNote:e.questionNote,caption:e.caption?e.caption:"",captionClass:e.captionClass?e.captionClass:"",category:e.category,defaultEnabled:"RangeSlider"===e.inputType||null,quizType:"mask",progressBarType:"2",children:(0,h.jsx)(r.Z,{answers:e.answers,buttonType:e.buttonType,inputType:e.inputType,showAllLabel:e.showAllLabel,btnClass:e.btnClass})},t)}))})}),"finished"===S&&!Q&&!D&&(0,h.jsx)(k,{onSubmit:function(e){console.log("emailtoSave",e),(0,d.d8)("quizEmail",e),K(e),L(!0),(0,d.bw)(t,"quizEmail",J,t),setTimeout((function(){Y()})),console.log("email3",J),window.top!==window.self&&window.parent.postMessage({func:"callGaEvent",category:"Survey",action:"submitEmail",label:J},"https://".concat(t))},skipEmail:function(){ee(!0,!0)}}),"finished"===S&&Q&&!D&&(0,h.jsx)(m,{viewMyResult:function(){B(!0),$(),ee(!0)}}),("finished"===S||"result"===S)&&D&&(0,h.jsxs)("div",{className:"question-box analyzing d-flex justify-content-center align-items-center flex-column",children:[(0,h.jsx)("p",{className:"question-box__title",children:"Analysing your answers"}),(0,h.jsx)(f.r,{className:"loader mt-0 mb-0"})]})]})})}}}]);
//# sourceMappingURL=172.3a78c698.chunk.js.map