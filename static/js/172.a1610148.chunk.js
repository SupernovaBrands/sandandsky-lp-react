"use strict";(self.webpackChunkcocoandeve_react=self.webpackChunkcocoandeve_react||[]).push([[172],{1172:function(e,s,a){a.r(s),a.d(s,{default:function(){return y}});var t=a(4942),n=a(885),o=a(2791),c=(a(1462),[{question:"How does your skin feel most days?",questionNote:"Choose 1",answers:["Dry and flaky","Tends to get oily throughout the day","A combination of oily and dry on different areas","Red and sensitive with uneven texture","Normal and flawless"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger"},{question:"About how many glasses of water do you drink per day?",questionNote:"Choose 1",answers:["3 or less","4 to 6","7 to 9","More than 10"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger",buttonType:"full"},{question:"What is your local climate like?",questionNote:"Choose 1",answers:["Dry","Neutral","Humid & Hot","Seasonal"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger",buttonType:"full"},{question:"What is your main concern?",questionNote:"Choose 1",answers:["Clogged and enlarged pores","Dull skin with fine lines and wrinkles","Dark spots or hyperpigmentation","Dehydrated and flaky skin","Acne and/or skin inflammation","Excess oil"],type:"SingleChoice",inputType:"Button",showAllLabel:null,category:"",btnClass:"btn__choice-bigger"}]),i=a(4392),r=a(3564),l=a(9708),u=a(3604),d=a(3033),h=a(184),k=function(e){var s=e.onSubmit,a=e.skipEmail,t=(0,o.useState)(""),c=(0,n.Z)(t,2),i=c[0],r=c[1],l=(0,o.useState)(!1),k=(0,n.Z)(l,2),m=k[0],p=k[1],b=(0,o.useState)(!1),f=(0,n.Z)(b,2),g=f[0],y=f[1];return(0,h.jsxs)("div",{className:"col-12 col-lg-6 mt-4 pt-0 pt-lg-4 text-center",children:[(0,h.jsx)("p",{className:"h1 mb-0",children:"We found your perfect mask"}),(0,h.jsx)("p",{className:"mt-2 h4 fw-normal mx-3",dangerouslySetInnerHTML:{__html:"Enter your email to view your results! Plus, get a promocode for 10% OFF for your first purchase."}}),(0,h.jsx)("div",{className:"col-12 col-lg-8 ms-auto me-auto mt-4",children:(0,h.jsx)("div",{className:"form-group",children:(0,h.jsxs)("form",{onSubmit:function(e){s(i),e.preventDefault()},children:[(0,h.jsx)("input",{type:"email",className:"form-control bg-light-gray",placeholder:"E-mail address",onChange:function(e){p((0,d.oH)(e.target.value)),r(e.target.value)}}),(0,h.jsxs)("div",{className:"d-flex pb-2 justify-content-center align-items-center mt-3",children:[(0,h.jsxs)("label",{className:"checkbox-number align-items-center pt-0 font-size-sm justify-content-center",htmlFor:"agree",children:[(0,h.jsx)("input",{className:"d-none",type:"checkbox",value:"true",id:"agree",onChange:function(e){y(e.target.checked)}}),(0,h.jsx)("div",{className:"".concat(g?"bg-primary border-0":""," custom-check me-1 mt-0 form-check-input text-center d-flex align-items-center justify-content-center"),children:(0,h.jsx)(u.r,{className:"".concat(g?"":"d-none"," svg text-white")})})]}),(0,h.jsx)("label",{className:"font-size-sm mx-1",dangerouslySetInnerHTML:{__html:"I agree to Privacy Policy & ToS"},htmlFor:"agree"})]}),(0,h.jsx)("p",{className:"font-size-sm",children:"By signing up, you agree to receive exclusive offers via email. Sign up not required for purchase. Opt out any time."}),(0,h.jsx)("button",{type:"submit",className:"btn btn-lg d-block btn-primary mb-3 w-100 mt-2",disabled:!m||!g,children:"Submit"})]})})}),(0,h.jsx)("div",{className:"footer-action w-100 pb-2 bg-white mt-4",children:(0,h.jsx)("a",{href:"#",className:"d-block text-underline text-black w-100 mt-5 mb-lg-4",onClick:a,children:"Skip this step"})})]})},m=function(e){var s=e.viewMyResult;return(0,h.jsxs)("div",{className:"col-12 col-lg-6 mt-4 pt-0 pt-lg-4 text-center",children:[(0,h.jsxs)("p",{className:"h1",children:["Thanks!",(0,h.jsx)("br",{}),"Here is your promocode:"]}),(0,h.jsxs)("div",{className:"col-12 col-lg-8 ms-auto me-auto mt-2",children:[(0,h.jsx)("span",{className:"h1 px-4 py-1 text-primary rounded p-2 bg-light-gray d-inline-block",children:"SKIN15"}),(0,h.jsx)("p",{className:"mt-2",children:"No min spend, 10% off on SINGLE masks only!"}),(0,h.jsx)("button",{className:"mt-2 btn btn-lg btn-primary w-100",onClick:s,children:"View my results"})]})]})},p=a(501),b=a(9804),f=function(e,s){var a=[],t=e[0].answers,n=s[1],o=e[1].answers,c=s[2],i=e[2].answers,r=s[3],l=e[3].answers,u=s[4];switch(n){case t[0]:switch(u){case l[0]:switch(r){case i[0]:case i[1]:switch(c){case o[0]:case o[1]:a=["TSW Mask"];break;case o[2]:case o[3]:a=["APC Mask"]}break;case i[2]:a=["TSW Mask"];break;case i[3]:a=["APC Mask"]}break;case l[1]:a=["AEA Mask"];break;case l[2]:switch(c){case o[0]:case o[1]:a=["TSW Mask"];break;default:a=["AEA Mask"]}break;case l[3]:a=["TSW Mask"];break;case l[4]:a=["OC Mask"];break;case l[5]:switch(r){case i[0]:case i[1]:}switch(c){case o[0]:case o[1]:a=["OC Mask"];break;default:a=["APC Mask"]}}break;case t[1]:switch(u){case l[0]:switch(r){case i[0]:case i[1]:switch(c){case o[0]:case o[1]:a=["APC Mask"];break;default:a=["OC Mask"]}break;default:a=["OC Mask"]}break;case l[1]:switch(c){case o[0]:case o[1]:a=["TSW Mask"];break;default:a=["AEA Mask"]}break;case l[2]:a=["AEA Mask"];break;case l[3]:switch(r){case i[0]:case i[1]:switch(c){case o[0]:case o[1]:a=["TSW Mask"];break;default:a=["APC Mask"]}break;default:a=["TSW Mask"]}break;case l[4]:a=["OC Mask"];break;case l[5]:switch(r){case i[0]:case i[1]:}switch(c){case o[0]:case o[1]:a=["APC Mask"];break;default:a=["OC Mask"]}}break;case t[2]:switch(u){case l[0]:switch(r){case i[0]:case i[1]:switch(c){case o[0]:case o[1]:a=["APC Mask"];break;default:a=["OC Mask"]}break;default:a=["OC Mask"]}break;case l[1]:if(r===i[2])a=["OC Mask"];else a=["AEA Mask"];break;case l[2]:switch(c){case o[0]:case o[1]:a=["AEA Mask"];break;default:a=["OC Mask"]}break;case l[3]:switch(r){case i[2]:case i[3]:a=["TSW Mask"];break;default:switch(c){case o[0]:case o[1]:a=["TSW Mask"];break;default:a=["OC Mask"]}}break;case l[4]:case l[5]:a=["OC Mask"]}break;case t[3]:switch(u){case l[0]:switch(r){case i[2]:a=["OC Mask"];break;case i[3]:a=["APC Mask"];break;default:switch(c){case o[0]:case o[1]:a=["APC Mask"];break;default:a=["OC Mask"]}}break;case l[1]:if(r===i[3])a=["OC Mask"];else a=["AEA Mask"];break;case l[2]:a=["AEA Mask"];break;case l[3]:a=["TSW Mask"];break;case l[4]:case l[5]:a=["OC Mask"]}break;case t[4]:switch(u){case l[0]:a=["APC Mask"];break;case l[1]:a=["TSW Mask"];break;case l[2]:a=["AEA Mask"];break;case l[3]:a=["TSW Mask"];break;case l[4]:case l[5]:a=["OC Mask"]}}return{productsRecommend:a}},g=a(3661);window.getCookie=d.ej;var y=function(){var e=(0,p.lr)(),s=(0,n.Z)(e,1)[0],a=s.get("site"),u=s.get("gaid"),y=s.get("state"),w=(0,o.useRef)(),v=(0,d.ej)("surveyPosition")||"start";"started"!==y||"start"!==(0,d.ej)("surveyPosition")&&null!==(0,d.ej)("surveyPosition")&&""!==(0,d.ej)("surveyPosition")||((0,d.EA)("Survey","started"),v="question-1",(0,d.d8)("answeredQuestion",""));var x=(0,d.ej)("currentQuestion")?parseInt((0,d.ej)("currentQuestion"),10):1,C=!!(0,d.ej)("quizEmail"),j=(0,d.PL)("getCookieAnsweredQuestionMask")?(0,d.PL)("getCookieAnsweredQuestionMask"):{},M=(0,o.useState)(v),A=(0,n.Z)(M,2),S=A[0],N=A[1],T=(0,o.useState)(x),q=(0,n.Z)(T,2),E=q[0],_=q[1],O=(0,o.useState)(j),P=(0,n.Z)(O,2),Z=P[0],W=P[1],z=(0,o.useState)(C),Q=(0,n.Z)(z,2),L=Q[0],F=Q[1],H=(0,o.useState)(!1),R=(0,n.Z)(H,2),D=R[0],B=R[1],I=(0,o.useState)(""),G=(0,n.Z)(I,2),K=G[0],V=G[1],J="result"!==S?"px-g":"overflow-hidden",X=function(e,s){console.log("answerAction",e,s),Z[e]=s,W((0,d.v_)(Z)),(0,d.cD)((0,d.v_)(Z)),console.log("currentAnswer2",Z)},U=function(e){if(e<=c.length){var s=c[e];if(s&&s.rule&&s.rule.skipped)if((0,d.v_)(Z)[s.rule.question]===s.rule.answer)X(e,""),_(E<e?e+1:e-1);else _(e);else _(e)}else e>=c.length&&(console.log("finish",S),$(),(0,d.d8)("surveyPosition","finished"),N("finished"),L&&ee(!0))},Y=function(){console.log("email to save",(0,d.ej)("quizEmail"));for(var e={},s=0,a=Object.entries(Z);s<a.length;s++){var t=(0,n.Z)(a[s],2),o=t[0],i=t[1],r=o-1;if(c[r])e["".concat(o,": ").concat(c[r].question)]=i}var l=f(c,Z).productsRecommend,h=[],k=[],m="";l.forEach((function(e,s){h.push(g.Z[e].handle),k.push(g.Z[e].sku),m="".concat(m).concat(0===s?"":",").concat(g.Z[e].sku)}));var p={_ga:u,questions_answers:e,email:(0,d.ej)("quizEmail"),sku:m,quiz_type:"mask"};fetch("https://api.sandandsky.com/surveys",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(p)})},$=function(){if(window.top!==window.self){var e=(0,d.v_)(Z),s=Object.keys(e);(0,d.EA)("Survey","completed"),(0,d.ne)(a,"surveySubmitNew","true"),s.forEach((function(s,a){var t=c[a],n=e[s],o=t.question,i="object"===typeof n?n.join(","):n;(0,d.EA)("Survey",i,o)}))}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f(c,Z),o=n.productsRecommend;if(console.log("currentAnswer",Z,o),s&&Y(),e){var i;(0,d.d8)("surveyPosition","finished"),N("finished"),(0,d.ne)(a,"surveyPosition","finished");var r=[],l=[];o.forEach((function(e,s){r.push(g.Z[e].handle),l.push(g.Z[e].sku)}));i={productsRecommend:o,productHandle:r,productSkus:l},(0,t.Z)(i,"productHandle",r),(0,t.Z)(i,"productSkus",l)}};return(0,h.jsx)("div",{ref:w,className:"survey-mask ".concat("start"===S?"cover":J," ").concat("result"!==S&&"start"!==S?"container":""),children:(0,h.jsxs)("div",{className:"row justify-content-center survey-content ".concat("start"===S?"survey-content__start pt-4":"align-content-start"," "),children:["start"===S&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"survey-mask__start-screen text-center mt-7",children:[(0,h.jsx)("img",{className:"tooltip",src:"https://imagedelivery.net/ghVX8djKS3R8-n0oGeWHEA/5d327fa8-3567-48a0-177f-0f28bcaa3300/828x"}),(0,h.jsx)("h1",{children:"Mask Quiz"}),(0,h.jsx)("button",{className:"btn btn-primary text-white",onClick:function(){return(0,d.EA)("Survey","started"),void N("question-1")},children:"Take the quiz"})]})}),"start"!==S&&"finished"!==S&&"result"!==S&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"text-center position-relative",children:c.map((function(e,s){var a="question-".concat(s);if(E===s+1)return"MultipleChoice"===e.type?(0,h.jsx)(i.C,{currentAnswer:(0,d.v_)(Z),totalQuestions:e.answers.length,totalSteps:c.length,answerAction:X,setCurrentQuestion:U,currentQuestion:E,colSize:"col-lg-8 offset-lg-2 col-xl-6 offset-xl-3",question:e.question,questionNote:e.questionNote,caption:e.caption?e.caption:"",captionClass:e.captionClass?e.captionClass:"",category:e.category,progressBarType:"2",children:(0,h.jsx)(l.Z,{answers:e.answers,lastFull:e.lastFull,maxChoose:e.maxChoose,lastDisableForAll:e.lastDisableForAll,btnClass:e.btnClass})},a):(0,h.jsx)(i.C,{currentAnswer:(0,d.v_)(Z),totalQuestions:e.answers.length,answerAction:X,setCurrentQuestion:U,currentQuestion:E,totalSteps:c.length,colSize:"col-lg-8 offset-lg-2 col-xl-6 offset-xl-3",question:e.question,questionNote:e.questionNote,caption:e.caption?e.caption:"",captionClass:e.captionClass?e.captionClass:"",category:e.category,defaultEnabled:"RangeSlider"===e.inputType||null,quizType:"mask",progressBarType:"2",children:(0,h.jsx)(r.Z,{answers:e.answers,buttonType:e.buttonType,inputType:e.inputType,showAllLabel:e.showAllLabel,btnClass:e.btnClass})},a)}))})}),"finished"===S&&!L&&!D&&(0,h.jsx)(k,{onSubmit:function(e){console.log("emailtoSave",e),(0,d.d8)("quizEmail",e),V(e),F(!0),(0,d.bw)(a,"quizEmail",K,a),setTimeout((function(){Y()})),console.log("email3",K),window.top!==window.self&&window.parent.postMessage({func:"callGaEvent",category:"Survey",action:"submitEmail",label:K},"https://".concat(a))},skipEmail:function(){ee(!0,!0)}}),"finished"===S&&L&&!D&&(0,h.jsx)(m,{viewMyResult:function(){B(!0),$(),ee(!0)}}),("finished"===S||"result"===S)&&D&&(0,h.jsxs)("div",{className:"question-box analyzing d-flex justify-content-center align-items-center flex-column",children:[(0,h.jsx)("p",{className:"question-box__title",children:"Analysing your answers"}),(0,h.jsx)(b.r,{className:"loader mt-0 mb-0"})]})]})})}}}]);
//# sourceMappingURL=172.a1610148.chunk.js.map